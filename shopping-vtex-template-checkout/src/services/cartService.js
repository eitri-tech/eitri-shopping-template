import { Vtex } from 'eitri-shopping-vtex-shared'
import Eitri from 'eitri-bifrost'

export const getCart = async () => {
	try {
		const cart = await Vtex.cart.getCartIfExists()
		return cart
	} catch (error) {
		console.log('Erro ao buscar carrinho', error)
	}
}

export const startPayment = async (cart, cardInfo, recaptchaToken, siteKey) => {
	try {
		return {
			orderId: 'v50481174plsh',
			transactionId: 'FB8222D5E1EC4A09B9A836AF9B2CEEE8',
			status: 'waiting_payment',
			RedirectResponseCollection: [],
			paymentAuthorizationAppCollection: [
				{
					appName: 'vtex.pix-payment',
					appPayload:
						'{"code":"00020126490014br.gov.bcb.pix0127mktplace.ml@polishop.com.br52040000530398654071274.925802BR5916POLISHOP OFICIAL6006Jundia62250521mpqrinter1176636254346304EDAD","qrCodeBase64Image":"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","expiresAt":"2025-07-07 02:34:34Z","paymentId":"E935ED03CF15403380E8385A9314FFE9","transactionId":"22E4E8FFCAD8443C9789D53DFC456937"}'
				}
			]
		}

		const result = await Vtex.checkout.pay(cart, cardInfo, recaptchaToken, siteKey)

		return result
	} catch (error) {
		console.log('Erro ao iniciar pagamento', error)
	}
}

export const getUserByEmail = async email => {
	return await Vtex.cart.getClientProfileByEmail(email)
}

export const saveCartIdOnStorage = async orderFormId => {
	return await Vtex.cart.saveCartIdOnStorage(orderFormId)
}

export const addUserData = async userData => {
	const newCart = await Vtex.checkout.addUserData(userData)
	return newCart
}

export const selectPaymentOption = async payload => {
	const newCart = await Vtex.checkout.selectPaymentOption(payload)
	return newCart
}

export const clearCart = async () => {
	await Vtex.cart.clearCart()
}

export const removeClientData = async () => {
	await Vtex.cart.removeClientData()
}

export const registerToNotify = async userProfileId => {
	try {
		Eitri.exposedApis.session.notifyLogin({ customerId: userProfileId })
	} catch (e) {
		console.log('erro on registerToNotify', e)
	}
}
